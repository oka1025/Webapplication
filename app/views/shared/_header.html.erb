<header>
  <nav class="navbar navbar-white bg-white">
    <!-- ハンバーガーボタン -->
    <div class="container-fluid">
      <button class="btn btn-navy custom-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="mx-auto">
        <%= link_to '寿司カウンター', root_path, class: 'navbar-brand text-center text-navy fw-bold' %>
      </div>
      <div>
        <% if user_signed_in? %>
          <%= link_to 'ログアウト', destroy_user_session_path, class: 'bi bi-box-arrow-right nav-link text-navy', data: { turbo_method: :delete } %>
        <% else %>
          <%= link_to "ログイン", new_user_session_path, class: 'text-navy' %>
          <%= link_to "新規登録", new_user_registration_path, class: 'text-navy' %>
        <% end %>
      </div>
    </div>
  </nav>
</header>

<!-- オフキャンバスサイドバー -->
<div class="offcanvas offcanvas-start bg-white text-navy" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel">
  <div class="offcanvas-header">
    <button type="button" class="btn-close btn-close-dark" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="nav flex-column">
      <h5 class="offcanvas-title" id="offcanvasSidebarLabel text-navy">メインメニュー</h5>
      <li class="nav-item mb-2">
        <%= link_to 'ホーム', root_path, class: 'nav-link text-navy' %>
      </li>
      <li class="nav-item mb-2">
        <%= link_to 'カウンター', "#", class: 'nav-link text-navy' %>
      </li>
      <li class="nav-item mb-2">
        <%= link_to 'カウント履歴', "#", class: 'nav-link text-navy' %>
      </li>
      <li class="nav-item mb-2">
        <%= link_to 'データベース', "#", class: 'nav-link text-navy' %>
      </li>
      <li class="nav-item mb-2">
        <%= link_to 'ガチャ', "#", class: 'nav-link text-navy' %>
      </li>
      <br>
      <h5 class="offcanvas-title" id="offcanvasSidebarLabel">ユーザーメニュー</h5>
      <li class="nav-item mb-2">
        <% if user_signed_in? %>
          <%= link_to 'ログアウト', destroy_user_session_path, class: 'nav-link text-white bi bi-box-arrow-right', data: { turbo_method: :delete } %>
        <% else %>
          <%= link_to 'ログイン', new_user_session_path, class: 'nav-link text-navy' %>
          <%= link_to '新規登録', new_user_registration_path, class: 'nav-link text-navy' %>
        <% end %>
      </li>
    </ul>
  </div>
</div>

<% if !user_signed_in? && request.path != "/users/sign_in" && request.path != "/users/sign_up" %>
  <div class="d-flex justify-content-center mt-4 mb-4">
    <div class="border-navy rounded p-4 text-center bg-white" style="max-width: 500px;">
      <h5 class="smahosize fw-bold mb-3">ゲストユーザーで利用中です。</h5>
      <p class="mb-4">
      ゲストユーザーのデータは一定時間で削除されます。<br>
      継続的にご利用いただくにはユーザー登録が必要です。
      </p>

      <div class="d-flex justify-content-center gap-3">
        <a class="btn btn-navy rouded-pill px-4 fw-bold" href="/users/sign_in" role="button">ログイン</a>
        <a class="btn btn-navy rouded-pill px-4 fw-bold" href="/users/sign_up" role="button">新規登録</a>
      </div>
    </div>
  </div>
<% end %>

